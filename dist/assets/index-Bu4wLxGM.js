import{v,r as c,j as e,L as P,M as D,N as T,n as y,a2 as $,a3 as J,o as u,w as F,I as b,a4 as K,a5 as _,a6 as ee,B as w,T as se,a7 as ne,X as te,Y as ae,Z as re,a8 as le,$ as ie,a0 as oe,a1 as ce,W as de}from"./index-C4TW4tYM.js";import{P as xe,a as he}from"./index-3DUDL6ch.js";import{u as ue,C as x,E as me,D as je,T as pe,M as j}from"./CustomInput-foLhZF1p.js";import{C as I}from"./CustomSelect-BsftQiJR.js";import{G as t}from"./Grid-BZAI-RHj.js";import{D as k,V as ge}from"./Visibility-pSrfOPQz.js";import{T as fe,a as be,b as C,c as i,d as Ce}from"./TableRow-Bi9mOLcp.js";import{C as ye}from"./listItemIconClasses-fHYOCpyz.js";import{F as ve}from"./index-C0x-TrXZ.js";const A=({form:l,closeForm:o,initialExpense:n})=>{const a=v(),{register:r,handleSubmit:d,reset:h}=ue({values:n||{}}),g=m=>{a(n?$(m):J(m)),h(),o()};return c.useEffect(()=>{h(n||{})},[n,h]),e.jsxs(P,{open:l,onClose:o,maxWidth:"md",fullWidth:!0,children:[e.jsx(D,{children:n?"Update Expense":"Add Expense"}),e.jsx(T,{children:e.jsxs("form",{onSubmit:d(g),children:[e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{size:{xs:12,md:4},children:e.jsx(x,{label:"Amount",name:"amount",type:"number",register:r,required:!0})}),e.jsx(t,{size:{xs:12,md:4},children:e.jsx(x,{label:"Date",name:"date",type:"date",register:r,required:!0})}),e.jsx(t,{size:{xs:12,md:4},children:e.jsx(x,{label:"Place",name:"place",register:r,required:!0})}),e.jsx(t,{size:{xs:12,md:4},children:e.jsx(I,{label:"Category",name:"category",options:[{value:"feed",label:"Feed"},{value:"medicine",label:"Medicine"},{value:"rope",label:"Rope"},{value:"equipment",label:"Equipment"},{value:"misc",label:"Misc"}],register:r,defaultValue:n?.category||"feed",required:!0})}),e.jsx(t,{size:{xs:12,md:4},children:e.jsx(I,{label:"Payment Method",name:"paymentMethod",options:[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"upi",label:"UPI"},{value:"other",label:"Other"}],register:r,defaultValue:n?.paymentMethod||"cash",required:!0})}),e.jsx(t,{size:{xs:12,md:4},children:e.jsx(x,{label:"Paid By",name:"paidBy",register:r})}),e.jsx(t,{size:{xs:12,md:4},children:e.jsx(x,{label:"Supplier Name",name:"supplierName",register:r})}),e.jsx(t,{size:{xs:12,md:4},children:e.jsx(x,{label:"Receipt Number",name:"receiptNumber",register:r})}),e.jsx(t,{size:{xs:12,md:12},children:e.jsx(x,{label:"Notes",name:"notes",register:r})})]}),e.jsx(k,{children:e.jsx(y,{type:"submit",variant:"contained",color:"primary",children:n?"Update":"Save"})})]})})]})},Pe=({preview:l,closePreview:o,PreviewDetails:n})=>n?e.jsxs(P,{open:l,onClose:o,maxWidth:"sm",fullWidth:!0,children:[e.jsx(D,{children:"Expense Preview"}),e.jsx(T,{children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{size:{xs:6},children:e.jsxs(u,{children:[e.jsx("strong",{children:"Place:"})," ",n.place]})}),e.jsx(t,{size:{xs:6},children:e.jsxs(u,{children:[e.jsx("strong",{children:"Amount:"})," ",n.amount]})}),e.jsx(t,{size:{xs:6},children:e.jsxs(u,{children:[e.jsx("strong",{children:"Category:"})," ",n.category]})}),e.jsx(t,{size:{xs:6},children:e.jsxs(u,{children:[e.jsx("strong",{children:"Payment:"})," ",n.paymentMethod]})}),e.jsx(t,{size:{xs:12},children:e.jsxs(u,{children:[e.jsx("strong",{children:"Notes:"})," ",n.notes]})})]})})]}):null,Te=()=>{const l=v(),{expenseList:o,searchTerm:n,paymentMethodFilter:a,currentPage:r,itemsPerPage:d}=F(s=>s.expenseTracker),h=o.filter(s=>{const f=s.place.toLowerCase().includes(n.toLowerCase()),Z=a==="all"||s.paymentMethod===a;return f&&Z}),g=h.length,m=(r-1)*d,E=h.slice(m,m+d),[O,z]=c.useState(!1),[W,N]=c.useState(null),[q,S]=c.useState(!1),[B,R]=c.useState(null),[L,p]=c.useState(!1),[M,U]=c.useState(null),V=(s,f)=>l(_(f+1)),H=s=>l(K(parseInt(s.target.value))),G=s=>{N(s),z(!0)},Q=s=>{R(s),S(!0)},X=s=>{U(s),p(!0)},Y=()=>{M&&l(ee({id:M.id})),p(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsx(be,{children:e.jsxs(C,{children:[e.jsx(i,{children:"Place"}),e.jsx(i,{children:"Amount"}),e.jsx(i,{children:"Category"}),e.jsx(i,{children:"Payment"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(Ce,{children:E.length>0?E.map(s=>e.jsxs(C,{children:[e.jsx(i,{children:s.place}),e.jsx(i,{children:s.amount}),e.jsx(i,{children:s.category}),e.jsx(i,{children:s.paymentMethod}),e.jsxs(i,{children:[e.jsx(b,{onClick:()=>Q(s),children:e.jsx(ge,{})}),e.jsx(b,{onClick:()=>G(s),children:e.jsx(me,{})}),e.jsx(b,{onClick:()=>X(s),children:e.jsx(je,{})})]})]},s.id)):e.jsx(C,{children:e.jsx(i,{colSpan:5,align:"center",children:e.jsx(u,{children:"No expenses found"})})})})]}),e.jsx(pe,{component:"div",count:g,page:r-1,rowsPerPage:d,onPageChange:V,onRowsPerPageChange:H}),e.jsx(A,{form:O,closeForm:()=>z(!1),initialExpense:W}),e.jsx(Pe,{preview:q,closePreview:()=>S(!1),PreviewDetails:B}),e.jsxs(P,{open:L,onClose:()=>p(!1),children:[e.jsx(T,{children:"Are you sure you want to delete this expense?"}),e.jsxs(k,{children:[e.jsx(y,{onClick:()=>p(!1),children:"Cancel"}),e.jsx(y,{color:"error",onClick:Y,children:"Confirm"})]})]})]})},Ee=()=>{const l=v(),{searchTerm:o,paymentMethodFilter:n}=F(a=>a.expenseTracker);return e.jsx(w,{margin:2,children:e.jsxs(t,{container:!0,spacing:2,alignItems:"center",justifyContent:"flex-end",children:[e.jsx(t,{size:{xs:12,sm:6,md:3},children:e.jsx(se,{label:"Search by Place",value:o,onChange:a=>l(ne(a.target.value)),size:"small",fullWidth:!0})}),e.jsx(t,{size:{xs:12,sm:6,md:3},children:e.jsxs(te,{fullWidth:!0,size:"small",children:[e.jsx(ae,{children:"Payment Method"}),e.jsxs(re,{value:n,onChange:a=>l(le(a.target.value)),children:[e.jsx(j,{value:"all",children:"All"}),e.jsx(j,{value:"cash",children:"Cash"}),e.jsx(j,{value:"card",children:"Card"}),e.jsx(j,{value:"upi",children:"UPI"}),e.jsx(j,{value:"other",children:"Other"})]})]})})]})})},ze=()=>e.jsxs(ye,{children:[e.jsx(Ee,{}),e.jsx(ie,{}),e.jsx(Te,{})]}),We=()=>{const l=oe(),o=ce(l.breakpoints.down("sm")),[n,a]=c.useState(!1),r=()=>a(!0),d=()=>a(!1);return e.jsxs("div",{children:[e.jsx(de,{children:e.jsx("title",{children:"Expense Tracker"})}),e.jsx(xe,{children:e.jsx(he,{title:"Expenses",btntitle:"Add Expense",icon:"",onActionClick:r})}),e.jsx(w,{sx:{maxWidth:"95%",mx:o?1:4},children:e.jsx(t,{container:!0,spacing:2,children:e.jsx(t,{size:{xs:12},children:e.jsx(ze,{})})})}),e.jsx(ve,{}),e.jsx(A,{form:n,closeForm:d,initialExpense:null})]})};export{We as default};
