import{c as K,j as e,v as I,r as h,L as B,M as k,N,I as v,n as A,O as ee,Q as se,o as d,w as L,R as ae,S as ne,U as te,B as W,T as le,V as ie,X as re,Y as oe,Z as ce,_ as de,$ as he,a0 as xe,a1 as me,W as je}from"./index-C4TW4tYM.js";import{m as M,P as ue,a as pe}from"./index-3DUDL6ch.js";import{u as ge,a as fe,C as l,D as V,E as be,T as ye,M as y}from"./CustomInput-foLhZF1p.js";import{C as z}from"./CustomSelect-BsftQiJR.js";import{G as s}from"./Grid-BZAI-RHj.js";import{D as q,V as ve}from"./Visibility-pSrfOPQz.js";import{A as G}from"./index-Dz6TQoAe.js";import{T as Ae,a as Ce,b as D,c as o,d as Te}from"./TableRow-Bi9mOLcp.js";import{C as Pe}from"./listItemIconClasses-fHYOCpyz.js";import{F as Se}from"./index-C0x-TrXZ.js";const ze=K(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),H=({form:r,closeForm:c,initialAnimal:n})=>{const i={id:0,animalId:"",animalName:"",animalType:"cow",dateOfArrival:"",fromPlace:"",lastInjectionDate:"",lastInjectionBy:"",lastBirthDate:"",lastBirthGender:void 0,lastBirthCount:void 0,monthsToNextBirth:void 0,breed:"",weight:void 0,healthStatus:"healthy",feedPreference:"",milkProduction:void 0,notes:"",vaccinationSchedule:[]},{register:a,handleSubmit:x,reset:j,control:C}=ge({defaultValues:n||i}),{fields:p,append:g,remove:T}=fe({control:C,name:"vaccinationSchedule"}),f=I(),P=m=>{f(n?ee(m):se(m)),j(),c()};return h.useEffect(()=>j(n||i),[n,j]),e.jsxs(B,{open:r,onClose:c,maxWidth:"lg",fullWidth:!0,children:[e.jsx(k,{children:n?"Update Animal":"New Animal"}),e.jsx(N,{children:e.jsxs("form",{onSubmit:x(P),children:[e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Animal Name",name:"animalName",register:a,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Animal ID",name:"animalId",register:a,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(z,{label:"Animal Type",name:"animalType",options:[{value:"cow",label:"Cow"},{value:"goat",label:"Goat"},{value:"buffalo",label:"Buffalo"}],register:a,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Date of Arrival",name:"dateOfArrival",type:"date",register:a,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"From Place",name:"fromPlace",register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(z,{label:"Last Birth Gender",name:"lastBirthGender",options:[{value:"male",label:"Male"},{value:"female",label:"Female"}],register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Last Injection Date",name:"lastInjectionDate",type:"date",register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Last Injection By",name:"lastInjectionBy",register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Last Birth Date",name:"lastBirthDate",type:"date",register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Last Birth Count",name:"lastBirthCount",type:"number",register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Months to Next Birth",name:"monthsToNextBirth",type:"number",register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Breed",name:"breed",register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Weight (kg)",name:"weight",type:"number",register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(z,{label:"Health Status",name:"healthStatus",options:[{value:"healthy",label:"Healthy"},{value:"sick",label:"Sick"},{value:"quarantine",label:"Quarantine"}],register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Feed Preference",name:"feedPreference",register:a})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(l,{label:"Milk Production (L/day)",name:"milkProduction",type:"number",register:a})}),e.jsx(s,{size:{xs:12},children:e.jsx(l,{label:"Notes",name:"notes",register:a})}),e.jsx(s,{size:{xs:12},style:{marginTop:16},children:e.jsx("h4",{children:"Vaccination Schedule"})}),p.map((m,u)=>e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{size:{xs:4},children:e.jsx(l,{label:"Date",name:`vaccinationSchedule.${u}.date`,type:"date",register:a,required:!0})}),e.jsx(s,{size:{xs:4},children:e.jsx(l,{label:"Vaccine",name:`vaccinationSchedule.${u}.vaccine`,register:a,required:!0})}),e.jsx(s,{size:{xs:3},children:e.jsx(l,{label:"By",name:`vaccinationSchedule.${u}.by`,register:a})}),e.jsx(s,{size:{xs:1},children:e.jsx(v,{onClick:()=>T(u),children:e.jsx(V,{})})})]},m.id)),e.jsx(s,{size:{xs:12},children:e.jsx(A,{startIcon:e.jsx(ze,{}),variant:"outlined",color:"primary",onClick:()=>g({date:"",vaccine:"",by:""}),children:"Add Vaccination"})})]}),e.jsx(q,{children:e.jsx(A,{type:"submit",variant:"contained",color:"primary",children:n?"Update":"Save"})})]})})]})},De={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1},exit:{opacity:0,scale:.8}},Ie=({preview:r,closePreview:c,PreviewDetails:n})=>n?e.jsx(G,{children:r&&e.jsxs(B,{open:r,onClose:c,maxWidth:"md",fullWidth:!0,PaperComponent:M.div,PaperProps:{variants:De,initial:"hidden",animate:"visible",exit:"exit"},children:[e.jsx(k,{children:"Animal Preview"}),e.jsx(N,{children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsxs(s,{size:{xs:6},children:[e.jsxs(d,{children:[e.jsx("strong",{children:"Name:"})," ",n.animalName]}),e.jsxs(d,{children:[e.jsx("strong",{children:"ID:"})," ",n.animalId]}),e.jsxs(d,{children:[e.jsx("strong",{children:"Type:"})," ",n.animalType]}),e.jsxs(d,{children:[e.jsx("strong",{children:"Date of Arrival:"})," ",n.dateOfArrival]}),e.jsxs(d,{children:[e.jsx("strong",{children:"From:"})," ",n.fromPlace]})]}),e.jsxs(s,{size:{xs:6},children:[e.jsxs(d,{children:[e.jsx("strong",{children:"Weight:"})," ",n.weight||"N/A"," kg"]}),e.jsxs(d,{children:[e.jsx("strong",{children:"Health Status:"})," ",n.healthStatus||"N/A"]}),e.jsxs(d,{children:[e.jsx("strong",{children:"Milk Production:"})," ",n.milkProduction||"N/A"," L/day"]}),e.jsxs(d,{children:[e.jsx("strong",{children:"Notes:"})," ",n.notes||"N/A"]})]})]})})]})}):null,Be=()=>{const r=I(),{animalList:c,searchTerm:n,animalTypeFilter:i,currentPage:a,itemsPerPage:x}=L(t=>t.animal),j=c.filter(t=>{const S=t.animalName.toLowerCase().includes(n?.toLowerCase()||""),J=i==="all"||t.animalType===i;return S&&J}),C=j.length,p=(a-1)*x,g=j.slice(p,p+x),T=(t,S)=>r(ne(S+1)),f=t=>r(ae(parseInt(t.target.value,10))),[P,m]=h.useState(!1),[u,E]=h.useState(null),[O,w]=h.useState(!1),[R,U]=h.useState(null),[$,b]=h.useState(!1),[F,Q]=h.useState(null),_=t=>{E(t),m(!0)},X=t=>{U(t),w(!0)},Y=t=>{Q(t),b(!0)},Z=()=>{F&&(r(te({id:F.id})),b(!1))};return e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{children:[e.jsx(Ce,{children:e.jsxs(D,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"ID"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Weight"}),e.jsx(o,{children:"Health"}),e.jsx(o,{children:"Actions"})]})}),e.jsx(Te,{children:e.jsx(G,{children:g.length>0?g.map(t=>e.jsxs(D,{component:M.tr,layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[e.jsx(o,{children:t.animalName}),e.jsx(o,{children:t.animalId}),e.jsx(o,{children:t.animalType}),e.jsx(o,{children:t.weight||"-"}),e.jsx(o,{children:t.healthStatus||"-"}),e.jsxs(o,{children:[e.jsx(v,{onClick:()=>X(t),color:"primary",children:e.jsx(ve,{})}),e.jsx(v,{onClick:()=>_(t),color:"warning",children:e.jsx(be,{})}),e.jsx(v,{onClick:()=>Y(t),color:"error",children:e.jsx(V,{})})]})]},t.id)):e.jsx(D,{children:e.jsx(o,{colSpan:6,align:"center",children:"No Animals Found"})})})})]}),e.jsx(ye,{rowsPerPageOptions:[5,10,25],component:"div",count:C,rowsPerPage:x,page:a-1,onPageChange:T,onRowsPerPageChange:f}),e.jsxs(B,{open:$,onClose:()=>b(!1),children:[e.jsx(N,{children:"Are you sure you want to delete this animal?"}),e.jsxs(q,{children:[e.jsx(A,{onClick:()=>b(!1),children:"Cancel"}),e.jsx(A,{color:"error",onClick:Z,children:"Confirm"})]})]}),e.jsx(H,{form:P,closeForm:()=>m(!1),initialAnimal:u}),e.jsx(Ie,{preview:O,closePreview:()=>w(!1),PreviewDetails:R})]})},Ne=()=>{const r=I(),{searchTerm:c,animalTypeFilter:n}=L(i=>i.animal);return e.jsx(W,{margin:2,children:e.jsxs(s,{container:!0,spacing:2,justifyContent:"flex-end",children:[e.jsx(s,{size:{xs:12,sm:6,md:3},children:e.jsx(le,{label:"Search by Name",value:c,onChange:i=>r(ie(i.target.value)),fullWidth:!0,size:"small"})}),e.jsx(s,{size:{xs:12,sm:6,md:3},children:e.jsxs(re,{fullWidth:!0,size:"small",children:[e.jsx(oe,{children:"Animal Type"}),e.jsxs(ce,{value:n,onChange:i=>r(de(i.target.value)),children:[e.jsx(y,{value:"all",children:"All Types"}),e.jsx(y,{value:"cow",children:"Cow"}),e.jsx(y,{value:"goat",children:"Goat"}),e.jsx(y,{value:"buffalo",children:"Buffalo"})]})]})})]})})},we=()=>e.jsxs(Pe,{children:[e.jsx(Ne,{}),e.jsx(he,{}),e.jsx(Be,{})]}),Oe=()=>{const r=xe(),c=me(r.breakpoints.down("sm")),[n,i]=h.useState(!1),a=()=>i(!0),x=()=>i(!1);return e.jsxs("div",{children:[e.jsx(je,{children:e.jsx("title",{children:"Animal Details"})}),e.jsx(ue,{children:e.jsx(pe,{title:"Animals",btntitle:"Add Animal",icon:"",onActionClick:a})}),e.jsx(W,{sx:{maxWidth:"95%",mx:c?1:4},children:e.jsx(s,{container:!0,spacing:0,children:e.jsx(s,{size:{xs:12},children:e.jsx(we,{})})})}),e.jsx(Se,{}),e.jsx(H,{form:n,closeForm:x,initialAnimal:null})]})};export{Oe as default};
