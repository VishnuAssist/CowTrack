import{c as N,j as e,i as q,r as v,L,M as Q,N as G,n as k,ap as se,aq as ne,l as S,B as x,T as re,ar as oe,o as b,I as w,$ as A,aj as ae,as as le,at as O,au as ie,a0 as ce,a1 as ue,W as de}from"./index-C4TW4tYM.js";import{m as me,P as xe,a as pe}from"./index-3DUDL6ch.js";import{u as he,C,E as fe,D as je,T as ge}from"./CustomInput-foLhZF1p.js";import{C as ye}from"./CustomSelect-BsftQiJR.js";import{G as h}from"./Grid-BZAI-RHj.js";import{D as K,V as be}from"./Visibility-pSrfOPQz.js";import{P as W,a as D,E as Ce}from"./Phone-DTTKul9E.js";import{C as V}from"./Close-VPgT99ZN.js";import{C as B}from"./Chip-DJVjHdDb.js";import{W as ve}from"./Work-Di9x3X-m.js";import{T as ze,a as Se,b as H,c as g,d as Re}from"./TableRow-Bi9mOLcp.js";import{A as Ie}from"./index-Dz6TQoAe.js";import{C as Ee}from"./listItemIconClasses-fHYOCpyz.js";function we(t,n=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(n)}function Ne(t,n=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(n)}function Pe(t,n="expected all items to be functions, instead received the following types: "){if(!t.every(s=>typeof s=="function")){const s=t.map(o=>typeof o=="function"?`function ${o.name||"unnamed"}()`:typeof o).join(", ");throw new TypeError(`${n}[${s}]`)}}var $=t=>Array.isArray(t)?t:[t];function Te(t){const n=Array.isArray(t[0])?t[0]:t;return Pe(n,"createSelector expects all input-selectors to be functions, but received the following types: "),n}function Me(t,n){const s=[],{length:o}=t;for(let l=0;l<o;l++)s.push(t[l].apply(null,n));return s}var We=class{constructor(t){this.value=t}deref(){return this.value}},ke=typeof WeakRef<"u"?WeakRef:We,Ae=0,U=1;function E(){return{s:Ae,v:void 0,o:null,p:null}}function _(t,n={}){let s=E();const{resultEqualityCheck:o}=n;let l,r=0;function i(){let a=s;const{length:d}=arguments;for(let f=0,z=d;f<z;f++){const j=arguments[f];if(typeof j=="function"||typeof j=="object"&&j!==null){let p=a.o;p===null&&(a.o=p=new WeakMap);const y=p.get(j);y===void 0?(a=E(),p.set(j,a)):a=y}else{let p=a.p;p===null&&(a.p=p=new Map);const y=p.get(j);y===void 0?(a=E(),p.set(j,a)):a=y}}const c=a;let m;if(a.s===U)m=a.v;else if(m=t.apply(null,arguments),r++,o){const f=l?.deref?.()??l;f!=null&&o(f,m)&&(m=f,r!==0&&r--),l=typeof m=="object"&&m!==null||typeof m=="function"?new ke(m):m}return c.s=U,c.v=m,m}return i.clearCache=()=>{s=E(),i.resetResultsCount()},i.resultsCount=()=>r,i.resetResultsCount=()=>{r=0},i}function qe(t,...n){const s=typeof t=="function"?{memoize:t,memoizeOptions:n}:t,o=(...l)=>{let r=0,i=0,a,d={},c=l.pop();typeof c=="object"&&(d=c,c=l.pop()),we(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const m={...s,...d},{memoize:f,memoizeOptions:z=[],argsMemoize:j=_,argsMemoizeOptions:p=[]}=m,y=$(z),P=$(p),R=Te(l),I=f(function(){return r++,c.apply(null,arguments)},...y),T=j(function(){i++;const M=Me(R,arguments);return a=I.apply(null,M),a},...P);return Object.assign(T,{resultFunc:c,memoizedResultFunc:I,dependencies:R,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>a,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:f,argsMemoize:j})};return Object.assign(o,{withTypes:()=>o}),o}var F=qe(_),Fe=Object.assign((t,n=F)=>{Ne(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const s=Object.keys(t),o=s.map(r=>t[r]);return n(o,(...r)=>r.reduce((i,a,d)=>(i[s[d]]=a,i),{}))},{withTypes:()=>Fe});const Oe=N([e.jsx("path",{d:"m12 2-5.5 9h11z"},"0"),e.jsx("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),e.jsx("path",{d:"M3 13.5h8v8H3z"},"2")]),De=N(e.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"})),Ve=N(e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"})),Be=N(e.jsx("path",{d:"M3 18h12v-2H3zM3 6v2h18V6zm0 7h18v-2H3z"}));function J({open:t,onClose:n,initialContact:s}){const o={id:0,name:"",role:"farmer",phoneNumber:"",email:"",native:"",purpose:"",notes:"",farmEquipmentOwned:""},l=q(),{register:r,handleSubmit:i,reset:a}=he(),d=c=>{l(s?se(c):ne(c)),a(),n()};return v.useEffect(()=>{a(s||o)},[s,a]),e.jsxs(L,{open:t,onClose:n,fullWidth:!0,maxWidth:"sm",children:[e.jsx(Q,{children:s?"Edit Contact":"Add Contact"}),e.jsxs("form",{onSubmit:i(d),children:[e.jsx(G,{children:e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{size:{xs:12,md:4},children:e.jsx(C,{label:"Name",name:"name",register:r,required:!0})}),e.jsx(h,{size:{xs:12,md:4},children:e.jsx(C,{label:"Phone Number",name:"phoneNumber",register:r,required:!0})}),e.jsx(h,{size:{xs:12,md:4},children:e.jsx(C,{label:"Email",name:"email",register:r,required:!0})}),e.jsx(h,{size:{xs:12,md:4},children:e.jsx(C,{label:"Native",name:"native",register:r,required:!0})}),e.jsx(h,{size:{xs:12,md:4},children:e.jsx(C,{label:"Purpose",name:"purpose",register:r,required:!0})}),e.jsx(h,{size:{xs:12,md:4},children:e.jsx(C,{label:"Notes",name:"notes",register:r,required:!0})}),e.jsx(h,{size:{xs:12,md:4},children:e.jsx(ye,{label:"Role",name:"role",options:[{value:"farmer",label:"Farmer"},{value:"Visitor",label:"Visitor"},{value:"Doctor",label:"Doctor"},{value:"common person",label:"common person"}],register:r,defaultValue:s?.role||"farmer",required:!0,fullWidth:!0})}),e.jsx(h,{size:{xs:12,md:4},children:e.jsx(C,{label:"Farm Equipment  ",name:"farmEquipmentOwned",register:r,required:!0})})]})}),e.jsxs(K,{children:[e.jsx(k,{onClick:n,children:"Cancel"}),e.jsx(k,{type:"submit",variant:"contained",children:s?"Update":"Add"})]})]})]})}const X=t=>t.contacts.contacts,Y=t=>t.contacts.searchQuery,He=t=>t.contacts.roleFilter,Z=t=>t.contacts.currentPage,ee=t=>t.contacts.pageSize,te=F([X,Y,He],(t,n,s)=>t.filter(o=>{const l=o.name.toLowerCase().includes(n.toLowerCase())||o.phoneNumber.includes(n),r=s?o.role===s:!0;return l&&r})),$e=F([te,Z,ee],(t,n,s)=>{const o=(n-1)*s;return t.slice(o,o+s)});function Ue(){const t=q(),n=S(Y);return e.jsx(x,{margin:2,children:e.jsx(h,{container:!0,spacing:2,alignItems:"center",justifyContent:"flex-end",children:e.jsx(h,{size:{xs:12,sm:6,md:3},children:e.jsx(re,{label:"Search by Name",value:n,onChange:s=>t(oe(s.target.value)),size:"small",fullWidth:!0})})})})}function Le({preview:t,closePreview:n,PreviewDetails:s}){if(!s)return null;const o=i=>{switch(i){case"farmer":return"primary";case"Doctor":return"secondary";case"Visitor":return"info";case"common person":return"success";default:return"default"}},l=i=>{switch(i){case"Milk":return"primary";case"Eggs":return"warning";default:return"default"}},r=({icon:i,label:a,value:d,chip:c})=>e.jsxs(x,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",minWidth:120},children:[i,e.jsxs(b,{variant:"body2",color:"text.secondary",sx:{ml:1},children:[a,":"]})]}),e.jsx(x,{sx:{ml:2,flex:1},children:c||e.jsx(b,{variant:"body1",fontWeight:"medium",children:d||"Not specified"})})]});return e.jsxs(L,{open:t,onClose:n,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsxs(Q,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"primary.main",color:"white"},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(W,{sx:{mr:1}}),e.jsx(b,{variant:"h6",component:"div",children:"Contact Details"})]}),e.jsx(w,{onClick:n,sx:{color:"white"},size:"small",children:e.jsx(V,{})})]}),e.jsxs(G,{sx:{mt:2},children:[e.jsxs(x,{sx:{mb:3},children:[e.jsxs(b,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:[e.jsx(W,{sx:{mr:1,fontSize:"1.2rem"}}),"Basic Information"]}),e.jsxs(x,{sx:{pl:1},children:[e.jsx(r,{icon:e.jsx(W,{fontSize:"small"}),label:"Name",value:s.name}),e.jsx(r,{icon:e.jsx(ve,{fontSize:"small"}),label:"Role",chip:e.jsx(B,{label:s.role,color:o(s.role),size:"small"})}),e.jsx(r,{icon:e.jsx(Ve,{fontSize:"small"}),label:"Native",value:s.native})]})]}),e.jsx(A,{sx:{my:2}}),e.jsxs(x,{sx:{mb:3},children:[e.jsxs(b,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:[e.jsx(D,{sx:{mr:1,fontSize:"1.2rem"}}),"Contact Information"]}),e.jsxs(x,{sx:{pl:1},children:[e.jsx(r,{icon:e.jsx(D,{fontSize:"small"}),label:"Phone",value:s.phoneNumber}),e.jsx(r,{icon:e.jsx(Ce,{fontSize:"small"}),label:"Email",value:s.email})]})]}),e.jsx(A,{sx:{my:2}}),e.jsxs(x,{sx:{mb:2},children:[e.jsxs(b,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:[e.jsx(Oe,{sx:{mr:1,fontSize:"1.2rem"}}),"Additional Information"]}),e.jsxs(x,{sx:{pl:1},children:[s.purpose&&e.jsx(r,{icon:e.jsx(De,{fontSize:"small"}),label:"Purpose",chip:e.jsx(B,{label:s.purpose,color:l(s.purpose),size:"small"})}),s.farmEquipmentOwned&&e.jsx(r,{icon:e.jsx(ae,{fontSize:"small"}),label:"Farm Equipment",value:s.farmEquipmentOwned}),s.notes&&e.jsxs(x,{sx:{mt:2},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Be,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsx(b,{variant:"body2",color:"text.secondary",children:"Notes:"})]}),e.jsx(b,{variant:"body2",sx:{p:1,backgroundColor:"grey.50",borderRadius:1,fontStyle:"italic",ml:3},children:s.notes})]})]})]})]}),e.jsx(K,{sx:{p:2},children:e.jsx(k,{onClick:n,variant:"contained",color:"primary",fullWidth:!0,startIcon:e.jsx(V,{}),children:"Close"})})]})}function Qe({onEdit:t}){const n=q(),s=S($e),o=S(te),l=S(Z),r=S(ee),i=(u,M)=>{n(O(M+1))},a=u=>{n(ie(parseInt(u.target.value,10))),n(O(1))},[d,c]=v.useState(!1),[m,f]=v.useState(null),z=u=>{f(u),c(!0)},j=()=>{c(!1)},[p,y]=v.useState(!1),[P,R]=v.useState(null),I=u=>{y(!0),R(u)},T=()=>{y(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(ze,{children:[e.jsx(Se,{children:e.jsxs(H,{children:[e.jsx(g,{children:"Name"}),e.jsx(g,{children:"Role"}),e.jsx(g,{children:"Phone"}),e.jsx(g,{children:"Email"}),e.jsx(g,{children:"Native"}),e.jsx(g,{children:"Actions"})]})}),e.jsx(Re,{children:e.jsx(Ie,{children:s.map(u=>e.jsxs(H,{component:me.tr,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:2},children:[e.jsx(g,{children:u.name}),e.jsx(g,{children:u.role}),e.jsx(g,{children:u.phoneNumber}),e.jsx(g,{children:u.email}),e.jsx(g,{children:u.native}),e.jsxs(g,{children:[e.jsx(w,{size:"small",color:"primary","aria-label":"View",onClick:()=>I(u),children:e.jsx(be,{})}),e.jsx(w,{onClick:()=>z(u),children:e.jsx(fe,{color:"warning"})}),e.jsx(w,{onClick:()=>n(le(u.id)),children:e.jsx(je,{color:"error"})})]})]},u.id))})})]}),e.jsx(ge,{component:"div",count:o.length,page:l-1,onPageChange:i,rowsPerPage:r,onRowsPerPageChange:a,rowsPerPageOptions:[5,10,25]}),e.jsx(J,{open:d,onClose:j,initialContact:m}),e.jsx(Le,{preview:p,closePreview:T,PreviewDetails:P})]})}function Ge({onEdit:t}){return e.jsxs(Ee,{children:[e.jsx(Ue,{}),e.jsx(A,{}),e.jsx(Qe,{onEdit:t})]})}function lt(){const t=ce(),n=ue(t.breakpoints.down("sm")),s=S(X),[o,l]=v.useState(!1),[r,i]=v.useState(null),a=d=>{i(d),l(!0)};return e.jsxs("div",{children:[e.jsx(de,{children:e.jsx("title",{children:"Contact Details"})}),e.jsx(xe,{children:e.jsx(pe,{title:"Contact Details",btntitle:"Add Contact",icon:"",onActionClick:()=>{i(null),l(!0)}})}),e.jsx(x,{sx:{maxWidth:"95%",mx:n?1:4},children:e.jsx(h,{container:!0,children:e.jsx(h,{size:{xs:12},children:e.jsx(Ge,{onEdit:a})})})}),e.jsx(J,{open:o,onClose:()=>l(!1),initialContact:s.find(d=>d.id===r)||null})]})}export{lt as default};
