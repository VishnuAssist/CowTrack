import{v,w as W,j as e,B as A,T as Z,a9 as $,X as J,Y as K,Z as _,aa as ee,L as z,M as w,I as b,N as P,o as t,r as x,n as T,ab as se,ac as ne,ad as ae,ae as ie,af as te,$ as le,a0 as re,a1 as oe,W as ce}from"./index-C4TW4tYM.js";import{P as de,a as xe}from"./index-3DUDL6ch.js";import{G as s}from"./Grid-BZAI-RHj.js";import{M as C,u as me,C as d,E as he,D as ue,T as je}from"./CustomInput-foLhZF1p.js";import{D as B,V as ge}from"./Visibility-pSrfOPQz.js";import{C as pe}from"./Close-VPgT99ZN.js";import{C as be}from"./CustomSelect-BsftQiJR.js";import{T as ye,a as Ce,b as f,c as l,d as fe}from"./TableRow-Bi9mOLcp.js";import{C as Te}from"./listItemIconClasses-fHYOCpyz.js";import{F as ve}from"./index-C0x-TrXZ.js";const Ae=()=>{const r=v(),{searchTerm:o,animalTypeFilter:n}=W(i=>i.animalCare),c=i=>{r(ee(i.target.value))};return e.jsx(A,{margin:2,children:e.jsxs(s,{container:!0,spacing:2,alignItems:"center",justifyContent:"flex-end",children:[e.jsx(s,{size:{xs:12,sm:6,md:3},children:e.jsx(Z,{label:"Search by Medicine",value:o,onChange:i=>r($(i.target.value)),size:"small",fullWidth:!0})}),e.jsx(s,{size:{xs:12,sm:6,md:3},children:e.jsxs(J,{fullWidth:!0,size:"small",children:[e.jsx(K,{children:"Filter by Animal"}),e.jsxs(_,{value:n,label:"Filter by Animal",onChange:c,children:[e.jsx(C,{value:"all",children:"All Animals"}),e.jsx(C,{value:"cow",children:"Cow"}),e.jsx(C,{value:"goat",children:"Goat"})]})]})})]})})},ze=({preview:r,closePreview:o,PreviewDetails:n})=>n?e.jsxs(z,{open:r,onClose:o,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(w,{children:["Animal Care Details",e.jsx(b,{onClick:o,sx:{position:"absolute",right:8,top:8},children:e.jsx(pe,{})})]}),e.jsxs(P,{dividers:!0,children:[e.jsxs(s,{container:!0,spacing:2,children:[e.jsxs(s,{size:{xs:6},children:[e.jsx(t,{variant:"body2",children:"Animal Type"}),e.jsx(t,{fontWeight:"bold",children:n.animalType})]}),e.jsxs(s,{size:{xs:6},children:[e.jsx(t,{variant:"body2",children:"Medicine"}),e.jsx(t,{fontWeight:"bold",children:n.medicineName})]}),e.jsxs(s,{size:{xs:6},children:[e.jsx(t,{variant:"body2",children:"Reason"}),e.jsx(t,{fontWeight:"bold",children:n.reason})]}),e.jsxs(s,{size:{xs:6},children:[e.jsx(t,{variant:"body2",children:"Suggested By"}),e.jsx(t,{fontWeight:"bold",children:n.suggestedBy})]}),e.jsxs(s,{size:{xs:6},children:[e.jsx(t,{variant:"body2",children:"Buying Place"}),e.jsx(t,{fontWeight:"bold",children:n.buyingPlace})]}),e.jsxs(s,{size:{xs:6},children:[e.jsx(t,{variant:"body2",children:"Contact"}),e.jsx(t,{fontWeight:"bold",children:n.buyingContact||"N/A"})]}),e.jsxs(s,{size:{xs:12},children:[e.jsx(t,{variant:"body2",children:"Notes"}),e.jsx(t,{fontWeight:"bold",children:n.notes||"N/A"})]})]}),e.jsx(A,{mt:2,children:e.jsxs(t,{variant:"caption",color:"text.secondary",children:["Date: ",n.date]})})]})]}):null,I=({form:r,closeForm:o,initialAnimalCare:n})=>{const c={id:0,animalType:"cow",medicineName:"",reason:"",suggestedBy:"",buyingPrice:0,buyingPlace:"",buyingContact:"",notes:"",date:"",medicineType:""},{register:i,handleSubmit:m,reset:h}=me({values:n||c}),j=v(),g=u=>{j(n?se(u):ne(u)),h(c),o()};return x.useEffect(()=>{h(n||c)},[n,h]),e.jsxs(z,{open:r,onClose:o,maxWidth:"md",fullWidth:!0,children:[e.jsx(w,{sx:{color:"darkblue"},children:n?"Update Animal Care":"New Animal Care"}),e.jsx(P,{sx:{display:"flex",flexDirection:"column"},children:e.jsxs("form",{onSubmit:m(g),children:[e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{size:{xs:12,md:4},children:e.jsx(be,{label:"Animal Type",name:"animalType",options:[{value:"cow",label:"Cow"},{value:"goat",label:"Goat"}],register:i,defaultValue:n?.animalType||"cow",required:!0,fullWidth:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(d,{label:"Medicine Name",name:"medicineName",register:i,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(d,{label:"Reason",name:"reason",register:i,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(d,{label:"Suggested By",name:"suggestedBy",register:i,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(d,{label:"Buying Price",name:"buyingPrice",type:"number",register:i,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(d,{label:"Buying Place",name:"buyingPlace",register:i,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(d,{label:"Buying Contact",name:"buyingContact",register:i})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(d,{label:"Date",name:"date",type:"date",register:i,required:!0})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(d,{label:"Medicine Type",name:"medicineType",register:i})}),e.jsx(s,{size:{xs:12,md:12},children:e.jsx(d,{label:"Notes",name:"notes",register:i})})]}),e.jsx(B,{children:e.jsx(T,{type:"submit",variant:"contained",color:"primary",children:n?"Update":"Save"})})]})})]})},Pe=()=>{const r=v(),{animalCareList:o,searchTerm:n,animalTypeFilter:c,currentPage:i,itemsPerPage:m}=W(a=>a.animalCare);console.log("animalcare",o);const h=o.filter(a=>{const y=a.medicineName.toLowerCase().includes(n.toLowerCase()),Y=c==="all"||a.animalType===c;return y&&Y}),j=h.length,g=(i-1)*m,u=h.slice(g,g+m),[N,D]=x.useState(!1),[M,k]=x.useState(null),q=a=>{k(a),D(!0)},R=()=>{D(!1)},[E,S]=x.useState(!1),[L,U]=x.useState(null),G=a=>{S(!0),U(a)},V=()=>S(!1),[H,p]=x.useState(!1),[F,O]=x.useState(null),Q=a=>{O(a),p(!0)},X=()=>{F&&(r(te({id:F.id})),p(!1))};return e.jsxs(e.Fragment,{children:[e.jsxs(ye,{children:[e.jsx(Ce,{children:e.jsxs(f,{children:[e.jsx(l,{children:"Animal"}),e.jsx(l,{children:"Medicine"}),e.jsx(l,{children:"Reason"}),e.jsx(l,{children:"Suggested By"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(fe,{children:u.length>0?u.map(a=>e.jsxs(f,{children:[e.jsx(l,{children:a.animalType}),e.jsx(l,{children:a.medicineName}),e.jsx(l,{children:a.reason}),e.jsx(l,{children:a.suggestedBy}),e.jsx(l,{children:a.date}),e.jsxs(l,{children:[e.jsx(b,{color:"primary",onClick:()=>G(a),children:e.jsx(ge,{})}),e.jsx(b,{color:"warning",onClick:()=>q(a),children:e.jsx(he,{})}),e.jsx(b,{color:"error",onClick:()=>Q(a),children:e.jsx(ue,{})})]})]},a.id)):e.jsx(f,{children:e.jsx(l,{colSpan:6,align:"center",children:e.jsx(t,{children:"No animal care records found."})})})})]}),e.jsx(je,{component:"div",rowsPerPageOptions:[5,10,25],count:j,rowsPerPage:m,page:i-1,onPageChange:(a,y)=>r(ie(y+1)),onRowsPerPageChange:a=>r(ae(parseInt(a.target.value,10)))}),e.jsxs(z,{open:H,onClose:()=>p(!1),children:[e.jsx(P,{children:"Are you sure you want to delete this record?"}),e.jsxs(B,{children:[e.jsx(T,{onClick:()=>p(!1),children:"Cancel"}),e.jsx(T,{color:"error",onClick:X,children:"Delete"})]})]}),e.jsx(ze,{preview:E,closePreview:V,PreviewDetails:L}),e.jsx(I,{form:N,closeForm:R,initialAnimalCare:M})]})},De=()=>e.jsxs(Te,{children:[e.jsx(Ae,{}),e.jsx(le,{}),e.jsx(Pe,{})]}),Re=()=>{const r=re(),o=oe(r.breakpoints.down("sm")),[n,c]=x.useState(!1),i=()=>c(!0),m=()=>c(!1);return e.jsxs("div",{children:[e.jsx(ce,{children:e.jsx("title",{children:"Animal Care"})}),e.jsx(de,{children:e.jsx(xe,{title:"Animal Care",btntitle:"Add Care Record",icon:"",onActionClick:i})}),e.jsx(A,{sx:{maxWidth:"95%",mx:o?1:4},children:e.jsx(s,{container:!0,spacing:0,children:e.jsx(s,{size:{xs:12},children:e.jsx(De,{})})})}),e.jsx(ve,{}),e.jsx(I,{form:n,closeForm:m,initialAnimalCare:null})]})};export{Re as default};
